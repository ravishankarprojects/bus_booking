<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus booking</title>
    <link rel="shortcut icon" href="images/logobus.PNG">
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>

<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<!-- fontasome cdn -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />


</head>
<body>
    <div >
        <nav class="navbar navbar-expand-lg fixed-top "  id="navbar">
            <div class="container-fluid">
              <a class="navbar-brand" href="busicon.html">
                <i class="bi bi-bus-front-fill" id="busicon"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-bus-front-fill" viewBox="0 0 16 16">
                    <path d="M16 7a1 1 0 0 1-1 1v3.5c0 .818-.393 1.544-1 2v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5V14H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a2.496 2.496 0 0 1-1-2V8a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1V2.64C1 1.452 1.845.408 3.064.268A43.608 43.608 0 0 1 8 0c2.1 0 3.792.136 4.936.268C14.155.408 15 1.452 15 2.64V4a1 1 0 0 1 1 1zM3.552 3.22A43.306 43.306 0 0 1 8 3c1.837 0 3.353.107 4.448.22a.5.5 0 0 0 .104-.994A44.304 44.304 0 0 0 8 2c-1.876 0-3.426.109-4.552.226a.5.5 0 1 0 .104.994ZM8 4c-1.876 0-3.426.109-4.552.226A.5.5 0 0 0 3 4.723v3.554a.5.5 0 0 0 .448.497C4.574 8.891 6.124 9 8 9c1.876 0 3.426-.109 4.552-.226A.5.5 0 0 0 13 8.277V4.723a.5.5 0 0 0-.448-.497A44.304 44.304 0 0 0 8 4m-3 7a1 1 0 1 0-2 0 1 1 0 0 0 2 0m8 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0m-7 0a1 1 0 0 0 1 1h2a1 1 0 1 0 0-2H7a1 1 0 0 0-1 1"/>
                  </svg>
              </a>
              <button class="navbar-toggler text-bg-danger" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>

              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link active text-white" aria-current="page" href="index.html" id="navbtn">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-white" href="about.html" id="navbtn">About</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" id="navbtn">
                      Services
                    </a>
                    <ul class="dropdown-menu text-bg-success">
                      <li><a class="dropdown-item text-white" href="businfo.html" id="navbtn">Bus Info</a></li>
                      <li><hr class="dropdown-divider text-white"></li>
                      <li><a class="dropdown-item text-white" href="book.html" id="navbtn">Booking Bus</a></li>
                      <li><hr class="dropdown-divider text-white"></li>
                      <li><a class="dropdown-item text-white" href="package.html" id="navbtn">Packages</a></li>
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-white" href="contact.html" id="navbtn">Contact</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-white" href="adminlog.html" id="navbtn">admin</a>
                  </li>
                </ul>
                <form class="d-flex" role="search" action="subscribers.php" method="post" id="subform">
                  <input class="form-control me-2" id="subsuc" type="search" placeholder="Subscribe" aria-label="Search" name="subscribe">
                  <button class="btn btn-outline-warning" type="submit" name="addsub">Subscribe</button>
                </form>
              </div>
            </div>
          </nav>
        </div>
        
        <section>
            <section id="content">
                    
                </section>
        </section>

        <!-- form -->
        
        <div class="container-fluid" >

        <form class="row g-3 needs-validation" novalidate method="post" action="pak.php" id="myForm">
            <div class="row"  data-aos="fade-right"
            data-aos-offset="300"
            data-aos-easing="ease-in-sine">
            <div class="col-md-1"></div>
           <div class="col-md-3">
            
              <label for="validationCustom01" class="form-label">NAME</label>
              <input type="text" class="form-control" id="validationCustom01" required name="name">
              <div class="invalid-feedback">
                please provide name
              </div>
            </div>
            <div class="col-md-1"></div>
            <div class="col-md-2">
              <label for="validationCustom02" class="form-label">AGE</label>
              <input type="number" class="form-control" id="validationCustom02" required name="age">
              <div class="invalid-feedback">
                please provide age
              </div>
            </div>
            <div class="col-md-1"></div>
            <div class="col-md-3">
              <label for="validationCustomUsername" class="form-label">EMAIL</label>
              <div class="input-group has-validation">
                <span class="input-group-text" id="inputGroupPrepend">@</span>
                <input type="email" class="form-control" id="validationCustomUsername" aria-describedby="inputGroupPrepend" required name="email">
                <div class="invalid-feedback">
                  Please provide email
                </div>
              </div>
            </div>
        </div>
<!-- row1 -->
<hr>
<div class="row"  data-aos="fade-left"
data-aos-offset="300"
data-aos-easing="ease-in-sine">

<div class="col-md-3"></div>

            <div class="col-md-3">
              <label for="validationCustomDate" class="form-label">DATE OF TRAVEL</label>
              <div class="input-group has-validation">
                <input type="date" class="form-control" id="validationCustomDate"  name="date" min="" aria-describedby="inputGroupPrepend" required>
                <div class="invalid-feedback" id="Datevalid">
                  Invalid Date
                </div>
              </div>
            </div>
            <script>
              function getCurrentDate() {
    const now = new Date();
    const year = now.getFullYear();
    const month = (now.getMonth() + 1).toString().padStart(2, '0');
    const day = now.getDate().toString().padStart(2, '0');
    return `${year}-${month}-${day}`;
  }
  document.getElementById('validationCustomDate').min = getCurrentDate();
            </script>
            <div class="col-md-3">
              <label for="validationCustom03" class="form-label">PH/MOBILE NO</label>
              <input type="tel" class="form-control" id="validationCustom03" required  name="phno" >
              <div class="invalid-feedback">
                Please provide a valid ph number
              </div>
            </div>

            <div class="col-md-3"></div>
        </div>
        <hr>
<!-- row2 -->

<div class="row"  data-aos="fade-right"
data-aos-offset="300"
data-aos-easing="ease-in-sine">
<div class="col-md-1"></div>
<div class="col-md-3">
  <h4 style="color: mediumorchid;">SELECT YOUR PLACE</h4> 
</div>

            <div class="col-md-5">
              <label for="validationCustom04" class="form-label">SELECT PACKAGE PLACE</label>
                <select class="form-select" id="validationCustom042" required >
                  <option selected disabled value="" >CITY</option>
                  <option value="Mysure" data-amount="3000">Mysure</option>
                  <option  value="Alappuzha" data-amount="5000">Alappuzha</option>
                  <option value="Ooty" data-amount="3000">Ooty</option>
                  <option value="Tiripathi" data-amount="7000">Tiripathi</option>
                  <option value="Thanjavur" data-amount="3000">Thanjavur</option>
                  <option value="Mamallapuram" data-amount="2000">Mamallapuram</option>
                  <option value="Calicut" data-amount="1000">Calicut</option>
                  <option value="Mahe" data-amount="1500">Mahe</option>
                  <option value="Isha Yoga" data-amount="6000">Isha Yoga</option>
                  <option value="Coorg" data-amount="7400">Coorg</option>
                </select><br>
              
                <div class="row">

                  <div class="col">
                  <label for="" style="color: yellow;">SELECTED CITY</label>
                <input type="text" id="cityto" placeholder="SELECT CITY" style="color: aliceblue;border-radius: 6px;" readonly name="city">
                </div>
                <div class="col">
                <label for="" style="color: yellow;">&#8377; PRIZE</label><br>
                <input type="text" id="selectedAmount" placeholder="PER PERSON" style="color: aliceblue;border-radius: 6px;" readonly name="cityto1">
              </div>

              </div>
                <div class="invalid-feedback">
                  Please select city
                </div>
            </div>
            <div class="col-md-2">
                <label for="validationCustom04" class="form-label">SELECT DAYS OF PLAN</label>
                
                <input type="number" max="5" min="1" class="form-control" id="validationCustom004" required  
                name="plan" oninput="updatecount()">
                <div class="invalid-feedback">
                  Please select plan only within 5 days
                </div>
              </div>
        </div>
        <hr>
<!-- row3 -->

<div class="row"  data-aos="fade-left"
data-aos-offset="300"
data-aos-easing="ease-in-sine">
<div class="col-md-1"></div>
<div class="col-md-4"><h4 style="color: mediumorchid;">ADULTS</h4>
<p>ENTER ONLY 1 TO 50 MEMBERS</p></div>

<div class="col-md-1"></div>
<div class="col-md-2">
    <label for="validationCustom051" class="form-label">NO OF MALE</label>
    <input type="number" class="form-control" id="validationCustom05" min="0" max="40" required  name="male" oninput="updatecount()">
    <div class="invalid-feedback">
      Please provide male only within 50 members
    </div>
  </div>
  <div class="col-md-1"></div>
<div class="col-md-2">
  <label for="validationCustom052" class="form-label">NO OF FEMALE</label>
        <input type="number" class="form-control" id="validationCustom06" min="0" max="40" required  name="female" oninput="updatecount()">
        <div class="invalid-feedback">
          Please provide female  only within 50 members
        </div><br> <br>
</div>    

</div>

<!--  -->
<div class="row"  data-aos="fade-left"
data-aos-offset="300"
data-aos-easing="ease-in-sine">
<div class="col-md-1"></div>
<div class="col-md-4"><h4 style="color: mediumorchid;">CHILDRENS</h4>
<p>ENTER ONLY 1 TO 50 MEMBERS</p>
<br><br><hr>
<label for="" style="color: yellow;">TOTAL COUNT</label>
<input type="text" id="countac" placeholder="COUNT" style="color: aliceblue;border-radius: 6px;" readonly name="countac" required>
</div>
<div class="col-md-1"></div>
<div class="col-md-2">
    <label for="validationCustom051" class="form-label">NO OF MALE</label>
    <input type="number" class="form-control" id="validationCustom07" min="0" max="40" required  name="cmale" oninput="updatecount()">
    <div class="invalid-feedback">
      Please provide male  only within 50 members
    </div>
  </div>
  <div class="col-md-1"></div>
<div class="col-md-2">
  <label for="validationCustom052" class="form-label">NO OF FEMALE</label>
        <input type="number" class="form-control" id="validationCustom071" min="0" max="40" required  name="cfemale" oninput="updatecount()">
        <div class="invalid-feedback">
          Please provide  only within 50 members
        </div>
</div>     

</div>
<hr>

<!-- row -->

<div class="row"  data-aos="fade-right"
data-aos-offset="300"
data-aos-easing="ease-in-sine">
<div class="col-md-1"></div>
<div class="col-md-1"></div>
<div class="col-md-4">
    <label for="validationCustom05" class="form-label">ADDRESS</label>
    <input type="text" class="form-control" id="validationCustom08" required  name="address">
    <div class="invalid-feedback">
      Please provide a Address
    </div>
  </div>
            
  <div class="col-md-1"></div>
<div class="col-md-4">
  <label for="validationCustom05" class="form-label">PROOF UPLOAD</label>
        <input type="file" id="fileinput" name="file" class="form-control" id="validationCustom09" required>
        <label for="">(eg: aadar,pan,driving license)</label>
        <div class="invalid-feedback">
          Please select file
        </div>
</div>     
<div class="col-md-1"></div>
</div>
<hr>
   <!-- row4 -->

   <div class="row"  data-aos="fade-left"
   data-aos-offset="300"
   data-aos-easing="ease-in-sine">

   <div class="col-md-1"></div>

   <div class="col-md-5">
    <label for="validationCustom041" class="form-label">SELECT BUSTYPE</label>
    <select class="form-select" id="validationCustom041" required>
      <option selected disabled value="">BUS TYPE</option>
      <option value="Ultra deluxe 50 seater" data-amount="1000">Ultra deluxe 50 seater</option>
      <option  value="A/C 40 seater" data-amount="2500">A/C 40 seater</option>
      <option value="normal airdoor 47 seater" data-amount="1200">normal airdoor 47 seater</option>
      <option value="sleeper cum 60 seater" data-amount="2000">sleeper cum 60 seater </option>
      <option value="super superior 30 seater" data-amount="2050">super superior 30 seater </option>
    </select><br>
    <div class="row">
      <div class="col">
      <label for="" style="color: yellow;">BUSTYPE</label>
      <input type="text" id="cityfrom" placeholder="BUS TYPE" style="color: aliceblue;border-radius: 6px;" readonly name="bustype" required>
    </div>
    <div class="col">
                <label for="" style="color: yellow;">&#8377; PRIZE</label><br>
                <input type="text" id="selectedAmount1" placeholder="PER PERSON" style="color: aliceblue;border-radius: 6px;" readonly required>
              </div>       
    
              </div>
    <div class="invalid-feedback">
      Please select bus type
    </div>
   </div>

   <div class="col-md-1"></div>

    <div class="col-md-3">
      <label for="validationCustom101" class="form-label">GENDER</label><br>
      <input type="radio" id="validationCustom10" required name="Gender" value="male">
      <label for="validationCustom100" class="form-label">Male</label>&nbsp;&VerticalLine;&nbsp;
      <input type="radio" id="validationCustom11" required name="Gender" value="female">
      <label for="validationCustom111" class="form-label">Female</label>&nbsp;&VerticalLine;&nbsp;
      <input type="radio" id="validationCustom12" required name="Gender" value="transgender">
      <label for="validationCustom122" class="form-label">Trangender</label>
      <br>
      <div class="invalid-feedback">
        Please select gender
      </div>
    </div>
    
    <div class="col-md-1"></div><br><br><br><br>
    <br><br><br><br><br>

   </div>
  <div class="row">
    <div class="col"></div>
    <div class="col">
      <label for="" style="color: yellow;">TOTAL AMOUNT</label>
      <input type="text" id="tot" placeholder="BILL" style="color: aliceblue;border-radius: 6px;" readonly 
      name="bill" required>
  </center>
    </div>
    <div class="col"></div>
  </div>
  <hr>
   <!-- row5 -->


    <div class="col-12" >
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
        <label class="form-check-label" for="invalidCheck">
          Agree the above Entered information are correct & changes may not allowed after submitting. 
        </label>
        <div class="invalid-feedback">
          You must agree before submitting.
        </div>
      </div>
    </div>
    <div class="col-12">
      <center><button class="btn btn-warning text-white" type="submit" name="bookpak">Submit form</button></center>
      <br><br><br>
    </div>
   
 <!-- row6 -->


          </form>


</div>


      

        <script>
            AOS.init();

            (() => {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  const forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }

      form.classList.add('was-validated')
    }, false)
  })
})()

//count numbers
function updatecount() {
    var Amale = Math.max(0, parseInt(document.getElementById('validationCustom05').value)) || 0;
    var Afemale = Math.max(0, parseInt(document.getElementById('validationCustom06').value)) || 0;
    var Cmale = Math.max(0, parseInt(document.getElementById('validationCustom07').value)) || 0;
    var Cfemale = Math.max(0, parseInt(document.getElementById('validationCustom071').value)) || 0;
    var totamt = Math.max(0, parseInt(document.getElementById('selectedAmount').value)) || 0;
    var busamt = Math.max(0, parseInt(document.getElementById('selectedAmount1').value)) || 0;
    var plan = Math.max(0, parseInt(document.getElementById('validationCustom004').value)) || 0;

    var total = Amale + Afemale + Cmale + Cfemale;
    if (total > 0) { // Only calculate if the total is greater than 0
        document.getElementById('countac').value = total;
        document.getElementById('tot').value = totamt*total*plan+busamt ;
    } else {
        // Set values to 0 or handle accordingly if total is 0
        document.getElementById('countac').value = 0+total;
        document.getElementById('tot').value = totamt*total*plan+busamt;
    }
}



  //dropdown
  const selectedcityfrom = document.getElementById('validationCustom041')
const selectedcityto = document.getElementById('validationCustom042')
const cityfrom=document.getElementById('cityfrom')
const cityto=document.getElementById('cityto')
selectedcityfrom.onchange = function(){
          cityfrom.value =    this.value;
          updateAmount1();
          updatecount();
}
selectedcityto.onchange = function(){
          cityto.value =    this.value;
          updateAmount();
          updatecount();
}
function updateAmount() {
            var dropdown = document.getElementById('validationCustom042');
            var selectedOption = dropdown.options[dropdown.selectedIndex];
            var amount = selectedOption.getAttribute('data-amount');
            document.getElementById('selectedAmount').value =  amount;
        }
function updateAmount1() {
            var dropdown = document.getElementById('validationCustom041');
            var selectedOption = dropdown.options[dropdown.selectedIndex];
            var amount = selectedOption.getAttribute('data-amount');
            document.getElementById('selectedAmount1').value =  amount;
        }

//ticket
document.getElementById('myForm').addEventListener('submit',function(event){
//file condition  
var fileinput = document.getElementById("fileinput");
var allowedExtension = ['.pdf', '.jpeg', '.png', '.jpg', '.webp'];
var maxFileSize = 5 * 1024 * 1024; // 5MB only allowed
if (!fileinput.files || !fileinput.files[0]) {
    alert("Please select a file");
} else {
    var selectedFile = fileinput.files[0];
    var fileExtension = '.' + selectedFile.name.split('.').pop();
    if (!allowedExtension.includes(fileExtension)) {
        alert("Invalid file type. Allowed file types are: " + allowedExtension.join(','));
    }
    if (selectedFile.size > maxFileSize) {
        alert("File size exceeds the limit. The maximum file size allowed is 5MB");
    }
}

//name
var conditionname1= document.getElementById('validationCustom01').value;
if (!conditionname1.match(/^[a-zA-Z\s]+$/) || conditionname1=="") {
alert('Invalid name,only alaphabets or please provide name');
}
else{
  localStorage.setItem('name1', conditionname1);
}

//phno condition
var phoneNumber1 =document.getElementById('validationCustom03').value; 
if (phoneNumber1.length !== 10 || phoneNumber1=="") {
alert('Invalid phone number length. Please enter a 10-digit phone number or please provide phno number');
}
else{
localStorage.setItem('phno1',phoneNumber1);
}

//email condition
var email1=document.getElementById('validationCustomUsername').value;
if (!email1.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)) {
  alert('invalid format of email or please provide email');
}
else{
  localStorage.setItem('eadd1',email1);
}
var plan = Math.max(0, parseInt(document.getElementById('validationCustom004').value)) || 0;
if (plan === 0) {
    alert('Plan value is 0. Please enter alteast 1');
}
 else {
  localStorage.setItem('plan',plan);
}

//details
var age1=document.getElementById('validationCustom02').value;
if (age1) {
  localStorage.setItem('age1', age1);
} else {
  alert('please provide your age');
}
var date1=document.getElementById('validationCustomDate').value;
if (date1) {
  localStorage.setItem('date1',date1);
} else {
  alert('please provide your date of travel');
}
var cityto1=document.getElementById('cityto').value;
if (cityto1) {
  localStorage.setItem('cityto1',cityto1);
} else {
  alert('please provide your package city')
}
var nmale=document.getElementById('validationCustom05').value;
if (nmale) {
  localStorage.setItem('nmale',nmale);
} else {
  alert('please provide your no of adult males') 
}
var nfemale=document.getElementById('validationCustom06').value
if (nfemale) {
  localStorage.setItem('nfemale',nfemale);
} else {
  alert('please provide your no of adult females');
}
var nother=document.getElementById('validationCustom07').value
if (nother) {
localStorage.setItem('nother',nother);  
} else {
  alert('please provide your no of children males');
}
var nno=document.getElementById('validationCustom071').value
if (nno) {
  localStorage.setItem('nno',nno);
} else {
  alert('please provide your no of children females');
}
var address1=document.getElementById('validationCustom08').value;
if (address1) {
  localStorage.setItem('address1',address1);
} else {
  alert('please provide address')
}
var bustype=document.getElementById('cityfrom').value;
if (bustype) {
  localStorage.setItem('bustype',bustype);
} else {
  alert('select your comfort bus type');
}
var gender1Input = document.querySelector('input[name="Gender"]:checked');
if (gender1Input) {
  var gender1 = gender1Input.value;
  localStorage.setItem('gender1', gender1);
} else {
  alert('Please select a gender');
}
var amt1=document.getElementById('tot').value;
localStorage.setItem('amt1',amt1);
});


document.getElementById('subform').addEventListener('submit',function(event){
var sub=document.getElementById('subsuc').value;
if (!sub.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)) {
  event.preventDefault();
  alert('invalid text')
}
document.getElementById('subform').reset();
return false;
            });

          </script>
    
    </body>
    </html>